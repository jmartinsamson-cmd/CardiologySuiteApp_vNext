<!doctype html>
<html>
  <head>
    <title>Simple JS Test</title>
  </head>
  <body>
    <h1>JavaScript Execution Test</h1>
    <div id="test-results"></div>

    <script src="./src/core/app.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const results = document.getElementById("test-results");

        // Test if our functions exist
        const tests = [
          {
            name: "populateDiagnoses function",
            exists: typeof populateDiagnoses === "function",
          },
          {
            name: "setActiveDiagnosis function",
            exists: typeof setActiveDiagnosis === "function",
          },
          {
            name: "initializeTheme function",
            exists: typeof initializeTheme === "function",
          },
          {
            name: "DIAGNOSES array",
            exists:
              typeof DIAGNOSES !== "undefined" && Array.isArray(DIAGNOSES),
          },
          {
            name: "DIAGNOSES length > 0",
            exists: typeof DIAGNOSES !== "undefined" && DIAGNOSES.length > 0,
          },
        ];

        tests.forEach((test) => {
          const div = document.createElement("div");
          div.style.padding = "10px";
          div.style.margin = "5px 0";
          div.style.backgroundColor = test.exists ? "#d4edda" : "#f8d7da";
          div.style.border =
            "1px solid " + (test.exists ? "#c3e6cb" : "#f5c6cb");
          div.innerHTML = `${test.exists ? "✅" : "❌"} ${test.name}`;
          results.appendChild(div);
        });

        // Also check for any JavaScript console errors
        const errorDiv = document.createElement("div");
        errorDiv.style.padding = "10px";
        errorDiv.style.margin = "10px 0";
        errorDiv.style.backgroundColor = "#d1ecf1";
        errorDiv.style.border = "1px solid #bee5eb";
        errorDiv.innerHTML =
          "<strong>Console Status:</strong> Check browser console (F12) for any JavaScript errors.";
        results.appendChild(errorDiv);
      });

      // Catch any immediate errors
      window.onerror = function (msg, url, line, col, error) {
        console.error("JavaScript Error:", msg, "at", url, ":", line);
        const errorDiv = document.createElement("div");
        errorDiv.style.padding = "10px";
        errorDiv.style.backgroundColor = "#f8d7da";
        errorDiv.style.border = "1px solid #f5c6cb";
        errorDiv.innerHTML = `❌ JavaScript Error: ${msg} at line ${line}`;
        document.getElementById("test-results").appendChild(errorDiv);
      };
    </script>
  </body>
</html>
